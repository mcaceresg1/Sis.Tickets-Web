<div class="modal-overlay" *ngIf="isOpen" (click)="cerrarModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Detalle de Ticket</h2>
      <button class="btn-close" (click)="cerrarModal()">&times;</button>
    </div>

    <div class="modal-body" *ngIf="!loading && ticket">
      <div class="detail-grid">
        <div class="detail-item">
          <label>Código:</label>
          <span class="value">{{ ticket.sCodigo }}</span>
        </div>

        <div class="detail-item">
          <label>Fecha:</label>
          <span class="value">{{ ticket.dfechaTicket }}</span>
        </div>

        <div class="detail-item">
          <label>Usuario:</label>
          <span class="value">{{ obtenerUsuario(ticket.IdUsuario) }}</span>
        </div>

        <div class="detail-item">
          <label>Sistema:</label>
          <span class="value">{{ ticket.Sistema || obtenerSistema(ticket.IdSistema) || '-' }}</span>
        </div>

        <div class="detail-item">
          <label>Módulo:</label>
          <span class="value">{{ ticket.Modulo || obtenerModulo(ticket.IdModulo) || '-' }}</span>
        </div>

        <div class="detail-item">
          <label>Página:</label>
          <span class="value">{{ ticket.Pagina || obtenerPagina(ticket.IdPagina) || '-' }}</span>
        </div>

        <div class="detail-item">
          <label>Tipo de Incidencia:</label>
          <span class="value">{{ obtenerTipoIncidencia(ticket.IdTipo) }}</span>
        </div>

        <div class="detail-item">
          <label>Estado:</label>
          <span class="value status-badge" [class]="'status-' + ticket.IdEstado">
            {{ obtenerEstado(ticket.IdEstado) }}
          </span>
        </div>

        <div class="detail-item">
          <label>Prioridad:</label>
          <span class="value priority-badge" [class]="'priority-' + ticket.IdPrioridad">
            {{ obtenerPrioridad(ticket.IdPrioridad) }}
          </span>
        </div>

        <div class="detail-item">
          <label>Impacto:</label>
          <span class="value impact-badge" [class]="'impact-' + ticket.IdInpacto">
            {{ obtenerImpacto(ticket.IdInpacto) }}
          </span>
        </div>

        <div class="detail-item">
          <label>Versión:</label>
          <span class="value">{{ ticket.sVersion || 'N/A' }}</span>
        </div>

        <div class="detail-item full-width">
          <label>Descripción:</label>
          <div class="description-content" [innerHTML]="ticket.sDescripcion"></div>
        </div>
      </div>
    </div>

    <div class="modal-body" *ngIf="loading">
      <div class="loading-container">
        <div class="spinner-border"></div>
        <p>Cargando detalle del ticket...</p>
      </div>
    </div>

    <div class="modal-body" *ngIf="errorMessage">
      <div class="alert alert-error">
        {{ errorMessage }}
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="cerrarModal()">Cerrar</button>
    </div>
  </div>
</div>

